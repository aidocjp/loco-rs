<!DOCTYPE html>
<html lang=" en-US" >
<head>
     

    
    
    
      <title>
           Scheduler - Loco.rs
          
      </title>

      
          <meta property="og:title" content="Scheduler - Loco.rs" />
          <meta property="og:title" content="Scheduler - Loco.rs">  
          <meta name="twitter:title" content="Scheduler - Loco.rs"> 
      
    


     
         
             <meta property="og:description" content="Loco.rs is like Ruby on Rails for Rust. Use it to quickly build and deploy Rust based apps from zero to production." />
         
     

     
         
             <meta name="description" content="Loco.rs is like Ruby on Rails for Rust. Use it to quickly build and deploy Rust based apps from zero to production." />
         
    


  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />


  <meta property="og:image" content="https://loco.rs/apple-touch-icon@x4.png">

  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:description" content="Loco.rs is like Ruby on Rails for Rust. Use it to quickly build and deploy Rust based apps from zero to production.">
  <meta name="twitter:image" content="https://loco.rs/apple-touch-icon@x4.png">
  
  

  <link rel="stylesheet" type="text/css" href=https://loco.rs/styles/styles.css />
  <link rel="stylesheet" type="text/css" href=https://loco.rs/syntax-theme-light.css />
  <link rel="stylesheet" type="text/css" href=https://loco.rs/syntax-theme-dark.css />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800" rel="stylesheet">

  <link rel="apple-touch-icon" sizes="180x180" href=https://loco.rs/apple-touch-icon.png>
  <link rel="icon" type="image/png" href=https://loco.rs/favicon-32x32.png>

</head>

<body><div class="dark"></div>
  <div class="relative flex min-h-screen flex-col ">
    



<header
	class=" sticky top-0 z-50 w-full border-border/40 backdrop-blur bg-background">
	<div class="container relative flex h-14 md:grid md:grid-cols-[240px_minmax(0,1fr)] xl:max-w-[80rem]">
		<div class="mr-4 hidden sm:flex">
			<a class="flex mr-4  items-center space-x-2" href="../../../index.html">
				<img src="https://loco.rs/icon.svg" width="30px" />
			</a>
			<nav class="flex w-full bg-transparent items-center gap-4 text-sm">
				
				
				
				
				
				
				<a class="nav-link text-black dark:text-white  active" href="../../getting-started/tour/index.html">ドキュメント
				</a>
				
				<a class="nav-link text-black dark:text-white " href="../../../blog/index.html">ブログ
				</a>
				
				<a class="nav-link text-black dark:text-white " href="../../../casts/index.html">キャスト
				</a>
				
				
			</nav>
		</div>

		<div class="flex items-center sm:hidden">
				<button onclick="toggleMenu()"
					class="inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:text-accent-foreground h-9 py-2 mr-2 px-0 text-base hover:bg-transparent focus-visible:bg-transparent focus-visible:ring-0 focus-visible:ring-offset-0 md:hidden"
					type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R15u6ja:" data-state="closed">
					<svg stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5">
						<path d="M3 5H11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
						</path>
						<path d="M3 12H16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
						</path>
						<path d="M3 19H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
						</path>
					</svg>
					<span class="sr-only">メニューを切り替える</span>
				</button>

				<div class="absolute mt-[106px] left-0 right-0">
						<nav id="menu-toggle" class="flex hidden bg-background  items-center gap-4 text-sm py-[15px] px-2 w-full">
							<a class="flex items-center" href="../../../index.html">
								<img src="https://loco.rs/icon.svg" width="30px" />
							</a>
							
							
							
							
							
							
							<a class="nav-link text-black dark:text-white  active" href="../../getting-started/tour/index.html">ドキュメント
							</a>
							
							<a class="nav-link text-black dark:text-white " href="../../../blog/index.html">ブログ
							</a>
							
							<a class="nav-link text-black dark:text-white " href="../../../casts/index.html">キャスト
							</a>
							
							
						</nav>
		</div>
		</div>

		<div class="flex flex-1 items-center justify-between space-x-2">
		
			
			<div class="flex-1 lg:flex lg:justify-end">
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput"
						class="placeholder-black dark:placeholder-white bg-transparent   inline-flex items-center whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground px-4 py-2 relative h-8 w-full justify-start rounded-[0.5rem] bg-muted/50 text-sm font-normal shadow-none sm:pr-12 lg:max-w-64"
						type="search" placeholder="ドキュメントを検索..." aria-label="ドキュメントを検索..." autocomplete="off">
		
					<div id="suggestions" class="shadow  rounded"></div>
				</form>
			</div>
			
		
		
		
			<nav class="flex items-center">
				<button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
					<span class="toggle-dark hidden"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
							fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
							class="feather feather-moon">
							<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
						</svg></span>
					<span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
							fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
							class="feather feather-sun">
							<circle cx="12" cy="12" r="5"></circle>
							<line x1="12" y1="1" x2="12" y2="3"></line>
							<line x1="12" y1="21" x2="12" y2="23"></line>
							<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
							<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
							<line x1="1" y1="12" x2="3" y2="12"></line>
							<line x1="21" y1="12" x2="23" y2="12"></line>
							<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
							<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
						</svg></span>
				</button>
				
				
				<div
					class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground py-2 h-8 w-8 px-0">
					<a class="nav-link" href="https://twitter.com/jondot" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg><span class="sr-only">Twitter</span></a>
				</div>
				
				<div
					class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground py-2 h-8 w-8 px-0">
					<a class="nav-link" href="https://github.com/loco-rs/loco" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="sr-only">GitHub</span></a>
				</div>
				
				
			</nav>
		</div>
	</div>
</header>
<!-- JavaScript to toggle menu visibility -->
<script>
	function toggleMenu() {
		var menu = document.getElementById('menu-toggle');
		menu.classList.toggle('hidden');
	}
</script>



    
<div role="document">
  <div class="bg-redrust text-background dark:bg-zinc-900">
    <div class="container xl:max-w-[80rem]">
      <aside class="w-full">
        
<div class="lg:py-8">
	<nav class="flex gap-5 md:gap-10 flex-wrap" aria-label="Main navigation">
		
		
		
		
		
		
		
		<div>
			<h3 class="mb-4 py-1 text-sm font-semibold text-white border-b border-red-100">入門</h3>
			<ul class="mb-4">
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../getting-started/tour/index.html">クイックツアー
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../getting-started/guide/index.html">Locoガイド
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../getting-started/starters/index.html">スターター
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../getting-started/axum-users/index.html">Axum vs Loco
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		
		<div>
			<h3 class="mb-4 py-1 text-sm font-semibold text-white border-b border-red-100">アプリケーション</h3>
			<ul class="mb-4">
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../the-app/your-project/index.html">あなたのプロジェクト
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../the-app/models/index.html">モデル
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../the-app/views/index.html">ビュー
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../the-app/controller/index.html">コントローラ
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		
		<div>
			<h3 class="mb-4 py-1 text-sm font-semibold text-white border-b border-red-100">処理</h3>
			<ul class="mb-4">
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../workers/index.html">ワーカー
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../mailers/index.html">メーラー
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../task/index.html">タスク
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-white font-semibold "
						href="index.html">スケジューラー
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		
		<div>
			<h3 class="mb-4 py-1 text-sm font-semibold text-white border-b border-red-100">インフラストラクチャ</h3>
			<ul class="mb-4">
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../infrastructure/storage/index.html">ストレージ
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../infrastructure/cache/index.html">キャッシュ
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../infrastructure/deployment/index.html">デプロイ
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../infrastructure/data/index.html">データ
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		
		<div>
			<h3 class="mb-4 py-1 text-sm font-semibold text-white border-b border-red-100">追加機能</h3>
			<ul class="mb-4">
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../extras/authentication/index.html">認証
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../extras/websocket/index.html">Websocket
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../extras/pluggability/index.html">プラグイン機能
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../extras/upgrades/index.html">アップグレード
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
		
		<div>
			<h3 class="mb-4 py-1 text-sm font-semibold text-white border-b border-red-100">リソース</h3>
			<ul class="mb-4">
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../resources/around-the-web/index.html">Web上の情報
					</a>
				</li>
				
				<li>
					<a class="inline-block w-full py-1 hover:text-white text-sm  text-red-200 dark:text-zinc-400"
						href="../../resources/faq/index.html">FAQ
					</a>
				</li>
				
			</ul>
		</div>
		
		
		
	</nav>
</div>

      </aside>
    </div>
  </div>
  <div
    class="container flex-1 items-start">
    <main class="py-6 xl:grid xl:grid-cols-[1fr_450px] xl:max-w-[80rem] xl:mx-auto">
      <div class="mx-auto w-full min-w-0">
        <div class="markdown prose dark:prose-invert max-w-[60rem] md:pr-12 sm:pr-0">
          <h1 class="mb-10 mt-[9px]">スケジューラー</h1>
          

          <p>Locoは、従来の煩雑な<code>crontab</code>システムを簡素化し、cronジョブのスケジュール設定をより簡単かつエレガントにします。スケジューラージョブは、シェルスクリプトコマンドを実行するか、登録済みの<a href="../task/index.html">タスク</a>を実行できます。</p>
<h2 id="setting-up">セットアップ</h2>
<p>スケジューラージョブは、YAMLスケジューラー設定ファイル、または環境YAMLファイルの一部として設定できます。</p>
<h3 id="1-your-dedicated-file">1. 専用ファイル</h3>
<p>専用ファイルを使用すると、すべてのスケジューラージョブを設定するための一元的な場所が提供され、管理と保守が容易になります。Locoジェネレーターコマンドを使用してテンプレートファイルを生成することから始めることができます。</p>
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> loco generate scheduler</span>
</span></code></pre>
<p>このコマンドは、<code>config</code>フォルダの下に<code>scheduler.yaml</code>ファイルを作成します。このファイル内でジョブを設定できます。</p>
<h3 id="2-environment-configuration-file">2. 環境設定ファイル</h3>
<p>環境のYAML設定ファイルにスケジューラーセクションを追加することで、環境ごとにスケジューラージョブを設定することもできます。</p>
<!-- <snip id="configuration-scheduler" inject_from="code" template="yaml"> -->
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">scheduler</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Location of shipping the command stdout and stderr.
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">output</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">stdout</span>
</span><span class="z-source z-yaml">  <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> A list of jobs to be scheduled.
</span></span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">jobs</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> The name of the job.
</span></span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">write_content</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> by default false meaning executing the the run value as a task. if true execute the run value as shell command
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">shell</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">true</span>
</span><span class="z-source z-yaml">      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> command to run
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>echo loco &gt;&gt; ./scheduler.txt<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">      <span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> The cron expression that defines the job&#39;s schedule. 
</span></span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">schedule</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">run every 1 second</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">output</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">silent</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tags</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&#39;</span>base<span class="z-punctuation z-definition z-string z-end z-yaml">&#39;</span></span><span class="z-punctuation z-separator z-sequence z-yaml">,</span> <span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&#39;</span>infra<span class="z-punctuation z-definition z-string z-end z-yaml">&#39;</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run_task</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>foo<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">schedule</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>at 10:00 am<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run_on_start</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">true</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">list_if_users</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">run</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>user_report<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">shell</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-language z-boolean z-yaml">true</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">schedule</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>* 2 * * * *<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">tags</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&#39;</span>base<span class="z-punctuation z-definition z-string z-end z-yaml">&#39;</span></span><span class="z-punctuation z-separator z-sequence z-yaml">,</span> <span class="z-string z-quoted z-single z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&#39;</span>users<span class="z-punctuation z-definition z-string z-end z-yaml">&#39;</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span></code></pre>
<!-- </snip> -->
<h2 id="scheduler-configuration">スケジューラー設定</h2>
<p>スケジューラー設定は以下の要素で構成されます:</p>
<ul>
<li><code>scheduler.output</code> (オプション): すべてのジョブのデフォルト出力場所を設定します。
<ul>
<li><code>stdout:</code> コンソールに出力（デフォルト）。</li>
<li><code>silent:</code> すべての出力を抑制します。</li>
</ul>
</li>
<li><code>scheduler.jobs:</code> スケジュールされるジョブのオブジェクト。オブジェクトキーはジョブ名を記述します。各ジョブには以下が含まれます:
<ul>
<li>
<p><code>schedule</code>: ジョブのスケジュールを定義するcron式です。
cronは、cron構文に変換する英語の表現、またはcron構文自体を受け入れます。</p>
<h5 id="english-to-cron"><em><strong>英語からcronへ</strong></em></h5>
<ul>
<li>例:</li>
<li>15秒ごと</li>
<li>毎分実行</li>
<li>毎日午後4時に実行</li>
<li>午前10時</li>
<li>毎月1日と15日の深夜に実行</li>
<li>日曜日の12:00</li>
<li>毎週木曜日の午後7時</li>
<li>火曜日の深夜</li>
</ul>
<h5 id="cron-syntax-format"><em><strong>Cron構文形式:</strong></em></h5>
<p>cronジョブはUTC基準である必要があります</p>
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sec</span></span><span class="z-meta z-function-call z-arguments z-shell">   min   hour   day of month   month   day of week   year</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">*</span></span><span class="z-meta z-function-call z-arguments z-shell">     <span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>     <span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>      <span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>              <span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>       <span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span>             <span class="z-keyword z-operator z-regexp z-quantifier z-shell">*</span></span>
</span></code></pre>
</li>
<li>
<p><code>run_on_start</code>: デフォルトでは<code>false</code>です。<code>true</code>に設定すると、スケジューラーの開始時にもジョブが実行されます。</p>
<ul>
<li><code>shell</code>: デフォルトでは<code>false</code>で、<code>run</code>値をタスクとして実行することを意味します。<code>true</code>の場合、<code>run</code>値をシェルコマンドとして実行します。</li>
<li><code>run</code>: 実行するCronジョブコマンド。
<ul>
<li><code>Task:</code> タスク名（変数付き。例: <code>[TASK_NAME] KEY:VAl</code>。タスク引数については<a href="../task/index.html">こちら</a>を参照してください）。<code>shell</code>フィールドは<code>false</code>である必要があることに注意してください。</li>
<li><code>Shell</code>: シェルコマンドを実行します（例: <code>"echo loco &gt;&gt; ./scheduler.txt"</code>）。<code>shell</code>フィールドは<code>true</code>である必要があることに注意してください。</li>
</ul>
</li>
<li><code>tags</code> (オプション): ジョブを分類および管理するためのタグのリスト。</li>
<li><code>output</code> (オプション): このジョブのグローバルな<code>scheduler.output</code>を上書きします。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="verifying-the-configuration">設定の検証</h2>
<p>ジョブを設定した後、すべてが正しいことを確認するために設定を検証できます。</p>
<h3 id="1-when-using-a-dedicated-file">1. 専用ファイルを使用する場合:</h3>
<p>以下のコマンドを実行して、スケジューラーファイルからジョブをリストアップします:</p>
<!-- <snip id="scheduler-list-from-file-command" inject_from="yaml"  template="sh"> -->
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> loco scheduler<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>config</span> config/scheduler.yaml<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>list</span></span>
</span></code></pre>
<!-- </snip> -->
<h3 id="2-when-using-environment-based-configuration">2. 環境ベースの設定を使用する場合:</h3>
<p>環境設定からジョブをリストアップするには、以下を実行します:</p>
<!-- <snip id="scheduler-list-from-env-setting-command" inject_from="yaml"  template="sh"> -->
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">LOCO_ENV</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">production</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> loco scheduler<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>list</span></span>
</span></code></pre>
<!-- </snip> -->
<h2 id="running-the-scheduler">スケジューラーの実行</h2>
<p>設定が検証されたら、<code>--list</code>フラグを削除してスケジューラーの実行を開始できます。スケジューラーは、シャットダウンシグナルが受信されるまで、スケジュールに基づいてジョブを継続的に実行します。シグナルを受信すると、実行中のすべてのタスクを安全に終了し、安全にシャットダウンします。</p>
<h3 id="important-notes">重要な注意:</h3>
<ul>
<li>ジョブが実行されている場合、Locoはそれを新しいプロセスで起動し、すべての環境変数が新しいジョブプロセスに伝播されます。</li>
<li>タスクの場合、<code>--environment</code>フラグを使用するか、<code>LOCO_ENV</code>環境変数を設定して、有効な環境でスケジューラーを実行していることを確認してください。これにより、タスクに正しい環境と設定がロードされます。</li>
<li>タスク設定の<code>vars</code>オブジェクトを使用することで、タスクに変数を渡すことができます。</li>
</ul>
<h2 id="running-a-single-scheduled-job-by-name">名前で単一のスケジュール済みジョブを実行する</h2>
<p>名前で特定のスケジューラージョブを実行するには、<code>--name</code>フラグを使用します。これにより、指定された名前の単一のジョブが実行されます。</p>
<!-- <snip id="scheduler-run-job-by-name-command" inject_from="yaml"  template="sh"> -->
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">LOCO_ENV</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">production</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> loco scheduler<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>name</span> <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>JOB_NAME<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span></code></pre>
<!-- </snip> -->
<p>このコマンドは、<code>scheduler.yaml</code>ファイル内の「Run command」という名前のジョブを見つけて実行します。</p>
<h2 id="running-scheduled-jobs-by-tag">タグでスケジュール済みジョブを実行する</h2>
<p>同じタグを共有する複数のジョブを実行することもできます。タグは、関連するジョブをグループ化するのに役立ちます。例えば、データベースのクリーンアップ、キャッシュの無効化、ログのローテーションなど、異なる種類のメンテナンス作業を実行する複数のジョブがあり、それらをまとめて実行したい場合があります。それらに<code>maintenance</code>のような同じタグを割り当てることで、それらすべてを一度に実行できます。</p>
<!-- <snip id="scheduler-run-job-by-tag-command" inject_from="yaml"  template="sh"> -->
<pre data-lang="sh" class="language-sh z-code"><code class="language-sh" data-lang="sh"><span class="z-source z-shell z-bash"><span class="z-variable z-other z-readwrite z-assignment z-shell">LOCO_ENV</span><span class="z-keyword z-operator z-assignment z-shell">=</span><span class="z-string z-unquoted z-shell">production</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">cargo</span></span><span class="z-meta z-function-call z-arguments z-shell"> loco scheduler<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>tag</span> <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&#39;</span>maintenance<span class="z-punctuation z-definition z-string z-end z-shell">&#39;</span></span></span>
</span></code></pre>
<!-- </snip> -->
<p>このコマンドは、<code>maintenance</code>というタグが付けられたすべてのジョブを実行し、関連するすべてのジョブが一度に実行されることを保証します。</p>

        </div>
        
        
<div class="flex items-center justify-between px-2">
  
  
  
  
  
  <a href="https://&/#x2F;&#x2F;loco.rs&#x2F;docs&#x2F;processing&#x2F;task&#x2F;" target="_blank" rel="noopener">
    <div class="card my-1">
      <div class="card-body py-2">
        &larr; タスク
      </div>
    </div>
  </a>
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <a class="ms-auto" href="https://&/#x2F;&#x2F;loco.rs&#x2F;docs&#x2F;infrastructure&#x2F;storage&#x2F;" target="_blank" rel="noopener">
    <div class="card my-1">
      <div class="card-body py-2">
        ストレージ &rarr;
      </div>
    </div>
  </a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</div>

      </div>

      <div class="hidden text-sm xl:block">
        <div class="bg-gray-50 p-2 mt-[90px] border border-gray-200 rounded-sm dark:bg-zinc-900">
        

<nav>
	<ul>
		
		<li class="mb-1 px-2 py-1 text-sm font-semibold"><a href="index.html">セットアップ</a></li>
		
		<ul>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">1. 専用ファイル</a>
			</li>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">2. 環境設定ファイル</a>
			</li>
			
		</ul>
		
		
		<li class="mb-1 px-2 py-1 text-sm font-semibold"><a href="index.html">スケジューラー設定</a></li>
		
		<ul>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">英語からcronへ</a>
			</li>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">Cron構文形式:</a>
			</li>
			
		</ul>
		
		
		<li class="mb-1 px-2 py-1 text-sm font-semibold"><a href="index.html">設定の検証</a></li>
		
		<ul>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">1. 専用ファイルを使用する場合:</a>
			</li>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">2. 環境ベースの設定を使用する場合:</a>
			</li>
			
		</ul>
		
		
		<li class="mb-1 px-2 py-1 text-sm font-semibold"><a href="index.html">スケジューラーの実行</a></li>
		
		<ul>
			
			<li
				class="group flex w-full items-center border border-transparent pl-5 px-2 py-1 hover:underline text-sm  text-foreground">
				<a href="index.html">重要な注意:</a>
			</li>
			
		</ul>
		
		
		<li class="mb-1 px-2 py-1 text-sm font-semibold"><a href="index.html">名前で単一のスケジュール済みジョブを実行する</a></li>
		
		
		<li class="mb-1 px-2 py-1 text-sm font-semibold"><a href="index.html">タグでスケジュール済みジョブを実行する</a></li>
		
		
	</ul>
</nav>


        </div>
      </div>

    </main>

  </div>



</div>


</div>

  </div>

  
<div class="section bg-redrust dark:bg-zinc-800 pt-8">
  <div class="container flex flex-col items-center text-center text-background py-8 pb-12">
      <div class="mb-8">
      <img src="https://loco.rs/icon.svg" width="130px" />
      </div>
      <div class="footer-links">
          <a href="https://github.com/loco-rs/loco" target="_blank" rel="noopener">
              Github
          </a>
          <a href="https://github.com/loco-rs/loco/blob/master/CODE_OF_CONDUCT.md" target="_blank" rel="noopener">
              行動規範
          </a>
          <a href="https://github.com/loco-rs/loco/blob/master/LICENSE" target="_blank" rel="noopener">
              ライセンス
          </a>
          <a href="https://github.com/loco-rs/loco/blob/master/SECURITY.md" target="_blank" rel="noopener">
              セキュリティ
          </a>
      </div>
  </div>
</div>

  
<script type="text/javascript" src="https://loco.rs/js/main.js" defer></script>

  <script type="text/javascript" src="https://loco.rs/plugins/elasticlunr.min.js" defer></script>
  <script type="text/javascript" src="https://loco.rs/search_index.en.js" defer></script>
  <script type="text/javascript" src="https://loco.rs/js/search.js" defer></script></body>

</html>
